+function(b){function e(){var b=document.createElement("bootstrap"),a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in a)if(void 0!==b.style[c])return{end:a[c]};return!1}b.fn.emulateTransitionEnd=function(d){var a=!1,c=this;b(this).one("bsTransitionEnd",function(){a=!0});setTimeout(function(){a||b(c).trigger(b.support.transition.end)},d);return this};b(function(){b.support.transition=e();b.support.transition&&
(b.event.special.bsTransitionEnd={bindType:b.support.transition.end,delegateType:b.support.transition.end,handle:function(d){if(b(d.target).is(this))return d.handleObj.handler.apply(this,arguments)}})})}(jQuery);
+function(b){function e(){this._activeZoom=this._initialScrollPosition=this._initialTouchPosition=this._touchMoveListener=null;this._$document=b(document);this._$window=b(window);this._$body=b(document.body);this._boundClick=b.proxy(this._clickHandler,this)}function d(a){this._fullHeight=this._fullWidth=this._overlay=this._targetImageWrap=null;this._targetImage=a;this._$body=b(document.body)}e.prototype.listen=function(){this._$body.on("click",'[data-action="zoom"]',b.proxy(this._zoom,this))};e.prototype._zoom=
function(a){var c=a.target;if(c&&"IMG"==c.tagName&&!this._$body.hasClass("zoom-overlay-open")){if(a.metaKey||a.ctrlKey)return window.open(a.target.getAttribute("data-original")||a.target.src,"_blank");c.width>=b(window).width()-d.OFFSET||(this._activeZoomClose(!0),this._activeZoom=new d(c),this._activeZoom.zoomImage(),this._$window.on("scroll.zoom",b.proxy(this._scrollHandler,this)),this._$document.on("keyup.zoom",b.proxy(this._keyHandler,this)),this._$document.on("touchstart.zoom",b.proxy(this._touchStart,
this)),document.addEventListener?document.addEventListener("click",this._boundClick,!0):document.attachEvent("onclick",this._boundClick,!0),"bubbles"in a?a.bubbles&&a.stopPropagation():a.cancelBubble=!0)}};e.prototype._activeZoomClose=function(a){this._activeZoom&&(a?this._activeZoom.dispose():this._activeZoom.close(),this._$window.off(".zoom"),this._$document.off(".zoom"),document.removeEventListener("click",this._boundClick,!0),this._activeZoom=null)};e.prototype._scrollHandler=function(a){null===
this._initialScrollPosition&&(this._initialScrollPosition=b(window).scrollTop());a=this._initialScrollPosition-b(window).scrollTop();40<=Math.abs(a)&&this._activeZoomClose()};e.prototype._keyHandler=function(a){27==a.keyCode&&this._activeZoomClose()};e.prototype._clickHandler=function(a){a.preventDefault?a.preventDefault():event.returnValue=!1;"bubbles"in a?a.bubbles&&a.stopPropagation():a.cancelBubble=!0;this._activeZoomClose()};e.prototype._touchStart=function(a){this._initialTouchPosition=a.touches[0].pageY;
b(a.target).on("touchmove.zoom",b.proxy(this._touchMove,this))};e.prototype._touchMove=function(a){10<Math.abs(a.touches[0].pageY-this._initialTouchPosition)&&(this._activeZoomClose(),b(a.target).off("touchmove.zoom"))};d.OFFSET=80;d._MAX_WIDTH=2560;d._MAX_HEIGHT=4096;d.prototype.zoomImage=function(){var a=document.createElement("img");a.onload=b.proxy(function(){this._fullHeight=Number(a.height);this._fullWidth=Number(a.width);this._zoomOriginal()},this);a.src=this._targetImage.src};d.prototype._zoomOriginal=
function(){this._targetImageWrap=document.createElement("div");this._targetImageWrap.className="zoom-img-wrap";this._targetImage.parentNode.insertBefore(this._targetImageWrap,this._targetImage);this._targetImageWrap.appendChild(this._targetImage);b(this._targetImage).addClass("zoom-img").attr("data-action","zoom-out");this._overlay=document.createElement("div");this._overlay.className="zoom-overlay";document.body.appendChild(this._overlay);this._calculateZoom();this._triggerAnimation()};d.prototype._calculateZoom=
function(){this._targetImage.offsetWidth;var a=this._fullWidth,c=this._fullHeight;b(window).scrollTop();var e=a/this._targetImage.width,f=b(window).height()-d.OFFSET,g=b(window).width()-d.OFFSET;this._imgScaleFactor=a<g&&c<f?e:a/c<g/f?f/c*e:g/a*e};d.prototype._triggerAnimation=function(){this._targetImage.offsetWidth;var a=b(this._targetImage).offset(),c=b(window).scrollTop()+b(window).height()/2,d=11*b(window).width()/16,e=a.left+this._targetImage.width/2;this._translateY=c-(a.top+this._targetImage.height/
2);this._translateX=d-e;a="scale("+this._imgScaleFactor+")";c="translate("+this._translateX+"px, "+this._translateY+"px)";b.support.transition&&(c+=" translateZ(0)");b(this._targetImage).css({"-webkit-transform":a,"-ms-transform":a,transform:a});b(this._targetImageWrap).css({"-webkit-transform":c,"-ms-transform":c,transform:c});this._$body.addClass("zoom-overlay-open")};d.prototype.close=function(){this._$body.removeClass("zoom-overlay-open").addClass("zoom-overlay-transitioning");b(this._targetImage).css({"-webkit-transform":"",
"-ms-transform":"",transform:""});b(this._targetImageWrap).css({"-webkit-transform":"","-ms-transform":"",transform:""});if(!b.support.transition)return this.dispose();b(this._targetImage).one(b.support.transition.end,b.proxy(this.dispose,this)).emulateTransitionEnd(300)};d.prototype.dispose=function(){this._targetImageWrap&&this._targetImageWrap.parentNode&&(b(this._targetImage).removeClass("zoom-img").attr("data-action","zoom"),this._targetImageWrap.parentNode.replaceChild(this._targetImage,this._targetImageWrap),
this._overlay.parentNode.removeChild(this._overlay),this._$body.removeClass("zoom-overlay-transitioning"))};b(function(){(new e).listen()})}(jQuery);
